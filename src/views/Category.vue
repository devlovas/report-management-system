<template>
  <div class='category'>
    <Toolbar/>

    <div class='labels'>
      <!-- 标签列表 -->
      <button v-for='data in category.labels.data' @click='onButtonClick(data)' :style='{backgroundColor: (product.selected.CLASSIFY && product.selected.CLASSIFY.indexOf(data.ID) != -1 ? "#e74c3c": "")}'>
       {{data.LABEL}}
      </button>

      <!-- 添加标签 -->
      <div class='add-label'>
        <form action="#">
          <input ref='inpLabelElem' type="text" v-model='labelText' :style='{width: `${label.inputHold ? 100 : 0}px`, opacity: `${label.inputHold ? 1 : 0}`}'>
          <i @click='addLabelOnClick' v-show='!label.inputHold'><svg t="1608547794666" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="37936" width="32" height="32"><path d="M531.192944 736.105843c-23.144432 1.128997-47.417861 1.693495-71.126792 1.693495-229.186329 0-417.164278-45.159868-442.566703-104.432194-2.257993 4.515987-3.38699 9.031974-3.38699 13.54796l0 117.415656c5.080485 63.223815 202.654906 114.593164 445.389195 114.593164 62.094818 0 120.802646-3.38699 174.429989-9.596472C586.513782 836.586549 550.950386 789.733186 531.192944 736.105843z" p-id="37937" fill="#8a8a8a"></path><path d="M513.693495 638.44763c0-40.643881 8.467475-79.029768 23.708931-113.464168-25.402426 1.128997-51.36935 1.693495-77.900772 1.693495-229.750827 0-417.164278-45.159868-442.566703-104.432194-2.257993 4.515987-3.38699 9.596472-3.38699 14.112459l0 117.415656c5.080485 63.223815 202.654906 114.593164 445.389195 114.593164 19.192944 0 37.821389-0.564498 56.449835-1.128997C514.257993 657.640573 513.693495 648.6086 513.693495 638.44763z" p-id="37938" fill="#8a8a8a"></path><path d="M797.071665 355.06946c37.256891 0 73.384785 7.338479 106.125689 20.886439 0.564498-2.257993 1.128997-4.515987 1.693495-7.338479L904.890849 251.201764c0-64.352811-199.832415-117.415656-445.389195-117.415656-246.121279 0-445.389195 53.062845-445.953693 117.415656l0 117.415656c5.080485 63.223815 202.654906 114.593164 445.953693 114.593164 34.998897 0 69.433297-1.128997 102.738699-3.38699C613.045204 404.745314 699.413451 355.06946 797.071665 355.06946z" p-id="37939" fill="#8a8a8a"></path><path d="M797.071665 411.519294c-125.318633 0-226.928335 101.609702-226.928335 226.928335 0 125.318633 101.609702 226.928335 226.928335 226.928335 125.318633 0 226.928335-101.609702 226.928335-226.928335C1024 513.128997 922.390298 411.519294 797.071665 411.519294zM822.47409 663.850055l0 160.31753-50.804851 0 0-160.31753-160.31753 0 0-50.804851 160.31753 0L771.669239 453.292172l50.804851 0 0 160.31753L982.227122 613.609702l0 50.240353L822.47409 663.850055z" p-id="37940" fill="#8a8a8a"></path></svg></i>
          <i @click='addLabelSubmit' v-show='label.inputHold'><svg t="1608549511382" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="45949" width="32" height="32"><path d="M243.2 906.666667c-6.4 0-12.8-2.133333-17.066667-8.533334-6.4-8.533333-4.266667-23.466667 4.266667-29.866666 172.8-130.133333 166.4-217.6 162.133333-328.533334-2.133333-21.333333-2.133333-44.8-2.133333-68.266666 0-55.466667 44.8-102.4 102.4-102.4 55.466667 0 98.133333 44.8 102.4 100.266666 0 12.8-8.533333 21.333333-21.333333 21.333334s-21.333333-8.533333-21.333334-21.333334c-2.133333-34.133333-27.733333-59.733333-59.733333-59.733333-32 0-59.733333 25.6-59.733333 59.733333 0 23.466667 2.133333 44.8 2.133333 66.133334 6.4 119.466667 12.8 221.866667-179.2 364.8-4.266667 6.4-8.533333 6.4-12.8 6.4zM433.066667 974.933333c-4.266667 0-10.666667-2.133333-14.933334-6.4-8.533333-8.533333-8.533333-21.333333 0-29.866666 19.2-21.333333 36.266667-42.666667 51.2-66.133334 6.4-10.666667 19.2-12.8 29.866667-6.4 10.666667 6.4 12.8 19.2 6.4 29.866667-17.066667 25.6-36.266667 49.066667-57.6 72.533333-4.266667 4.266667-8.533333 6.4-14.933333 6.4z" p-id="45950" fill="#1296db"></path><path d="M168.533333 851.2c-8.533333 0-14.933333-4.266667-19.2-10.666667-6.4-10.666667-2.133333-23.466667 8.533334-29.866666 164.266667-87.466667 157.866667-183.466667 153.6-285.866667 0-17.066667-2.133333-36.266667-2.133334-53.333333 0-100.266667 81.066667-181.333333 181.333334-181.333334 89.6 0 164.266667 64 179.2 151.466667 2.133333 10.666667-6.4 23.466667-17.066667 25.6-10.666667 2.133333-23.466667-6.4-25.6-17.066667-10.666667-66.133333-70.4-115.2-136.533333-115.2-76.8 0-138.666667 61.866667-138.666667 138.666667 0 17.066667 0 34.133333 2.133333 51.2 6.4 106.666667 10.666667 226.133333-174.933333 326.4h-10.666667zM546.133333 974.933333c-4.266667 0-8.533333-2.133333-12.8-4.266666-8.533333-6.4-10.666667-21.333333-4.266666-29.866667 2.133333-4.266667 4.266667-6.4 6.4-10.666667 6.4-10.666667 19.2-12.8 29.866666-6.4 10.666667 6.4 12.8 19.2 6.4 29.866667-2.133333 4.266667-6.4 8.533333-8.533333 10.666667-4.266667 8.533333-10.666667 10.666667-17.066667 10.666666z" p-id="45951" fill="#1296db"></path><path d="M110.933333 761.6c-10.666667 0-19.2-6.4-21.333333-17.066667-2.133333-10.666667 4.266667-23.466667 17.066667-25.6 147.2-32 138.666667-110.933333 125.866666-209.066666-2.133333-12.8-2.133333-23.466667-4.266666-36.266667-6.4-64 14.933333-128 61.866666-177.066667 51.2-55.466667 125.866667-87.466667 200.533334-87.466666 132.266667 0 243.2 98.133333 260.266666 230.4 2.133333 10.666667-6.4 21.333333-19.2 23.466666-10.666667 2.133333-21.333333-6.4-23.466666-19.2-12.8-108.8-106.666667-192-217.6-192-64 0-128 27.733333-170.666667 74.666667-36.266667 40.533333-55.466667 91.733333-51.2 142.933333 0 10.666667 2.133333 23.466667 4.266667 34.133334 10.666667 100.266667 23.466667 215.466667-160 256 0 2.133333-2.133333 2.133333-2.133334 2.133333zM328.533333 947.2c-6.4 0-10.666667-2.133333-14.933333-6.4-8.533333-8.533333-8.533333-21.333333 0-29.866667 46.933333-44.8 81.066667-87.466667 104.533333-130.133333 6.4-10.666667 19.2-12.8 29.866667-8.533333 10.666667 6.4 12.8 19.2 8.533333 29.866666-25.6 46.933333-64 91.733333-113.066666 138.666667-4.266667 6.4-8.533333 6.4-14.933334 6.4z" p-id="45952" fill="#1296db"></path><path d="M145.066667 637.866667c-8.533333 0-19.2-2.133333-27.733334-6.4-14.933333-8.533333-27.733333-21.333333-32-38.4-12.8-40.533333-17.066667-81.066667-17.066666-121.6 0-113.066667 44.8-219.733333 123.733333-298.666667 78.933333-81.066667 185.6-123.733333 298.666667-123.733333 113.066667 0 219.733333 44.8 298.666666 123.733333 78.933333 78.933333 123.733333 185.6 123.733334 298.666667v46.933333c0 12.8-10.666667 21.333333-21.333334 21.333333-12.8 0-21.333333-10.666667-21.333333-21.333333v-46.933333c0-102.4-40.533333-196.266667-110.933333-268.8-70.4-72.533333-166.4-110.933333-268.8-110.933334s-196.266667 40.533333-268.8 110.933334C149.333333 275.2 110.933333 371.2 110.933333 471.466667c0 38.4 6.4 74.666667 17.066667 110.933333 2.133333 4.266667 4.266667 8.533333 10.666667 12.8 4.266667 2.133333 10.666667 2.133333 14.933333 0 8.533333-4.266667 14.933333-12.8 12.8-23.466667-10.666667-32-14.933333-66.133333-14.933333-100.266666 0-91.733333 36.266667-177.066667 100.266666-243.2 64-64 151.466667-100.266667 243.2-100.266667s177.066667 36.266667 243.2 100.266667c61.866667 61.866667 98.133333 145.066667 100.266667 234.666666 0 12.8-8.533333 21.333333-21.333333 21.333334-10.666667 0-21.333333-8.533333-21.333334-21.333334-2.133333-76.8-34.133333-149.333333-87.466666-204.8C646.4 202.666667 571.733333 170.666667 490.666667 170.666667c-81.066667 0-155.733333 32-213.333334 87.466666-57.6 57.6-87.466667 132.266667-87.466666 213.333334 0 29.866667 4.266667 59.733333 12.8 87.466666 8.533333 32-6.4 64-38.4 74.666667-6.4 4.266667-12.8 4.266667-19.2 4.266667z" p-id="45953" fill="#1296db"></path><path d="M492.8 558.933333c-10.666667 0-21.333333-8.533333-21.333333-21.333333v-21.333333-42.666667c0-12.8 8.533333-21.333333 21.333333-21.333333s21.333333 8.533333 21.333333 21.333333v64c0 10.666667-10.666667 21.333333-21.333333 21.333333zM727.466667 987.733333c-10.666667 0-23.466667 0-34.133334-2.133333-117.333333-14.933333-211.2-110.933333-226.133333-226.133333-8.533333-74.666667 12.8-151.466667 64-206.933334 57.6-64 145.066667-98.133333 230.4-87.466666 117.333333 14.933333 211.2 110.933333 226.133333 226.133333 8.533333 74.666667-12.8 151.466667-64 206.933333-49.066667 55.466667-119.466667 89.6-196.266666 89.6z m0-484.266666c-64 0-123.733333 27.733333-164.266667 74.666666-42.666667 49.066667-61.866667 108.8-53.333333 174.933334 12.8 98.133333 91.733333 177.066667 189.866666 189.866666 72.533333 8.533333 145.066667-19.2 194.133334-72.533333 42.666667-49.066667 61.866667-108.8 53.333333-174.933333-12.8-98.133333-91.733333-177.066667-189.866667-189.866667-10.666667 0-19.2-2.133333-29.866666-2.133333z" p-id="45954" fill="#1296db"></path><path d="M691.2 842.666667c-6.4 0-10.666667-2.133333-14.933333-6.4l-64-64c-8.533333-8.533333-8.533333-21.333333 0-29.866667 8.533333-8.533333 21.333333-8.533333 29.866666 0l49.066667 49.066667 162.133333-162.133334c8.533333-8.533333 21.333333-8.533333 29.866667 0 8.533333 8.533333 8.533333 21.333333 0 29.866667l-177.066667 177.066667c-4.266667 4.266667-8.533333 6.4-14.933333 6.4z" p-id="45955" fill="#1296db"></path></svg></i>
        </form>
      </div>
    </div>
    <div class='product'>

      <!-- 品名列表 -->
      <ul>
        <li v-for='(data, index) in category.products.data' @click='onProductClick(data)' :style='{color: index % 2 && "#EC4C40"}' :style='{backgroundColor: product.selected.ID == data.ID ? "#00B26D" : ""}'>
          {{String(++index).padStart(3, 0)}} : {{data.NAME}}
        </li>
        <li>{{category.products.data.length + 1}} :</li>
      </ul>

      <!-- 添加品名 -->
      <div class='add-product'>
        <form action="#">
          <input ref='inpProductElem' type="text" v-model='productText' :style='{width: `${product.inputHold ? 200 : 0}px`, opacity: `${product.inputHold ? 1 : 0}`}'>
          <i @click='addProductOnClick' v-show='!product.inputHold'><svg t="1608549315854" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="39452" width="21" height="21"><path d="M1024 256L768 0 128 640 0 1024 384 896.498054zM307.498833 747.081712L747.081712 307.498833l82.776654 82.776653-439.58288 439.184436z m656.136965-491.081712L859.542412 360.093385 663.906615 164.457588 768 60.364202z m-329.911284-61.459922l82.776653 82.776654-439.184435 439.184435-82.776654-82.776653zM67.436576 956.264591l33.36965-99.610895 66.83891 66.838911z m145.431906-48.510505l-96.9214-96.921401 48.908949-146.428016L359.595331 859.143969zM341.366537 981.366537h512v42.633463h-512zM938.633463 981.366537h85.366537v42.633463h-85.366537z" fill="#8a8a8a" p-id="39453"></path></svg></i>
          <i @click='addProductSubmit' v-show='product.inputHold'><svg t="1608549511382" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="45949" width="32" height="32"><path d="M243.2 906.666667c-6.4 0-12.8-2.133333-17.066667-8.533334-6.4-8.533333-4.266667-23.466667 4.266667-29.866666 172.8-130.133333 166.4-217.6 162.133333-328.533334-2.133333-21.333333-2.133333-44.8-2.133333-68.266666 0-55.466667 44.8-102.4 102.4-102.4 55.466667 0 98.133333 44.8 102.4 100.266666 0 12.8-8.533333 21.333333-21.333333 21.333334s-21.333333-8.533333-21.333334-21.333334c-2.133333-34.133333-27.733333-59.733333-59.733333-59.733333-32 0-59.733333 25.6-59.733333 59.733333 0 23.466667 2.133333 44.8 2.133333 66.133334 6.4 119.466667 12.8 221.866667-179.2 364.8-4.266667 6.4-8.533333 6.4-12.8 6.4zM433.066667 974.933333c-4.266667 0-10.666667-2.133333-14.933334-6.4-8.533333-8.533333-8.533333-21.333333 0-29.866666 19.2-21.333333 36.266667-42.666667 51.2-66.133334 6.4-10.666667 19.2-12.8 29.866667-6.4 10.666667 6.4 12.8 19.2 6.4 29.866667-17.066667 25.6-36.266667 49.066667-57.6 72.533333-4.266667 4.266667-8.533333 6.4-14.933333 6.4z" p-id="45950" fill="#1296db"></path><path d="M168.533333 851.2c-8.533333 0-14.933333-4.266667-19.2-10.666667-6.4-10.666667-2.133333-23.466667 8.533334-29.866666 164.266667-87.466667 157.866667-183.466667 153.6-285.866667 0-17.066667-2.133333-36.266667-2.133334-53.333333 0-100.266667 81.066667-181.333333 181.333334-181.333334 89.6 0 164.266667 64 179.2 151.466667 2.133333 10.666667-6.4 23.466667-17.066667 25.6-10.666667 2.133333-23.466667-6.4-25.6-17.066667-10.666667-66.133333-70.4-115.2-136.533333-115.2-76.8 0-138.666667 61.866667-138.666667 138.666667 0 17.066667 0 34.133333 2.133333 51.2 6.4 106.666667 10.666667 226.133333-174.933333 326.4h-10.666667zM546.133333 974.933333c-4.266667 0-8.533333-2.133333-12.8-4.266666-8.533333-6.4-10.666667-21.333333-4.266666-29.866667 2.133333-4.266667 4.266667-6.4 6.4-10.666667 6.4-10.666667 19.2-12.8 29.866666-6.4 10.666667 6.4 12.8 19.2 6.4 29.866667-2.133333 4.266667-6.4 8.533333-8.533333 10.666667-4.266667 8.533333-10.666667 10.666667-17.066667 10.666666z" p-id="45951" fill="#1296db"></path><path d="M110.933333 761.6c-10.666667 0-19.2-6.4-21.333333-17.066667-2.133333-10.666667 4.266667-23.466667 17.066667-25.6 147.2-32 138.666667-110.933333 125.866666-209.066666-2.133333-12.8-2.133333-23.466667-4.266666-36.266667-6.4-64 14.933333-128 61.866666-177.066667 51.2-55.466667 125.866667-87.466667 200.533334-87.466666 132.266667 0 243.2 98.133333 260.266666 230.4 2.133333 10.666667-6.4 21.333333-19.2 23.466666-10.666667 2.133333-21.333333-6.4-23.466666-19.2-12.8-108.8-106.666667-192-217.6-192-64 0-128 27.733333-170.666667 74.666667-36.266667 40.533333-55.466667 91.733333-51.2 142.933333 0 10.666667 2.133333 23.466667 4.266667 34.133334 10.666667 100.266667 23.466667 215.466667-160 256 0 2.133333-2.133333 2.133333-2.133334 2.133333zM328.533333 947.2c-6.4 0-10.666667-2.133333-14.933333-6.4-8.533333-8.533333-8.533333-21.333333 0-29.866667 46.933333-44.8 81.066667-87.466667 104.533333-130.133333 6.4-10.666667 19.2-12.8 29.866667-8.533333 10.666667 6.4 12.8 19.2 8.533333 29.866666-25.6 46.933333-64 91.733333-113.066666 138.666667-4.266667 6.4-8.533333 6.4-14.933334 6.4z" p-id="45952" fill="#1296db"></path><path d="M145.066667 637.866667c-8.533333 0-19.2-2.133333-27.733334-6.4-14.933333-8.533333-27.733333-21.333333-32-38.4-12.8-40.533333-17.066667-81.066667-17.066666-121.6 0-113.066667 44.8-219.733333 123.733333-298.666667 78.933333-81.066667 185.6-123.733333 298.666667-123.733333 113.066667 0 219.733333 44.8 298.666666 123.733333 78.933333 78.933333 123.733333 185.6 123.733334 298.666667v46.933333c0 12.8-10.666667 21.333333-21.333334 21.333333-12.8 0-21.333333-10.666667-21.333333-21.333333v-46.933333c0-102.4-40.533333-196.266667-110.933333-268.8-70.4-72.533333-166.4-110.933333-268.8-110.933334s-196.266667 40.533333-268.8 110.933334C149.333333 275.2 110.933333 371.2 110.933333 471.466667c0 38.4 6.4 74.666667 17.066667 110.933333 2.133333 4.266667 4.266667 8.533333 10.666667 12.8 4.266667 2.133333 10.666667 2.133333 14.933333 0 8.533333-4.266667 14.933333-12.8 12.8-23.466667-10.666667-32-14.933333-66.133333-14.933333-100.266666 0-91.733333 36.266667-177.066667 100.266666-243.2 64-64 151.466667-100.266667 243.2-100.266667s177.066667 36.266667 243.2 100.266667c61.866667 61.866667 98.133333 145.066667 100.266667 234.666666 0 12.8-8.533333 21.333333-21.333333 21.333334-10.666667 0-21.333333-8.533333-21.333334-21.333334-2.133333-76.8-34.133333-149.333333-87.466666-204.8C646.4 202.666667 571.733333 170.666667 490.666667 170.666667c-81.066667 0-155.733333 32-213.333334 87.466666-57.6 57.6-87.466667 132.266667-87.466666 213.333334 0 29.866667 4.266667 59.733333 12.8 87.466666 8.533333 32-6.4 64-38.4 74.666667-6.4 4.266667-12.8 4.266667-19.2 4.266667z" p-id="45953" fill="#1296db"></path><path d="M492.8 558.933333c-10.666667 0-21.333333-8.533333-21.333333-21.333333v-21.333333-42.666667c0-12.8 8.533333-21.333333 21.333333-21.333333s21.333333 8.533333 21.333333 21.333333v64c0 10.666667-10.666667 21.333333-21.333333 21.333333zM727.466667 987.733333c-10.666667 0-23.466667 0-34.133334-2.133333-117.333333-14.933333-211.2-110.933333-226.133333-226.133333-8.533333-74.666667 12.8-151.466667 64-206.933334 57.6-64 145.066667-98.133333 230.4-87.466666 117.333333 14.933333 211.2 110.933333 226.133333 226.133333 8.533333 74.666667-12.8 151.466667-64 206.933333-49.066667 55.466667-119.466667 89.6-196.266666 89.6z m0-484.266666c-64 0-123.733333 27.733333-164.266667 74.666666-42.666667 49.066667-61.866667 108.8-53.333333 174.933334 12.8 98.133333 91.733333 177.066667 189.866666 189.866666 72.533333 8.533333 145.066667-19.2 194.133334-72.533333 42.666667-49.066667 61.866667-108.8 53.333333-174.933333-12.8-98.133333-91.733333-177.066667-189.866667-189.866667-10.666667 0-19.2-2.133333-29.866666-2.133333z" p-id="45954" fill="#1296db"></path><path d="M691.2 842.666667c-6.4 0-10.666667-2.133333-14.933333-6.4l-64-64c-8.533333-8.533333-8.533333-21.333333 0-29.866667 8.533333-8.533333 21.333333-8.533333 29.866666 0l49.066667 49.066667 162.133333-162.133334c8.533333-8.533333 21.333333-8.533333 29.866667 0 8.533333 8.533333 8.533333 21.333333 0 29.866667l-177.066667 177.066667c-4.266667 4.266667-8.533333 6.4-14.933333 6.4z" p-id="45955" fill="#1296db"></path></svg></i>
        </form>
      </div>
    </div>
    <foot-tagbar/>
  </div>
</template>

<script>
import Toolbar from '/@/components/Toolbar.vue'
import FootTagbar from '/@/components/FootTagbar.vue'
import { getLabelRequest, getProductRequest, addLabelRequest, addProductRequest, chgProductRequest } from '/@/service/request.js'

import { ref, reactive } from 'vue'
import { useStore } from 'vuex'
import { dialog } from '/@/tools/index.js'
export default {
  name: 'Category',
  components: { Toolbar, FootTagbar },
  setup () {
    const store = useStore()
    const inpLabelElem = ref(null)
    const inpProductElem = ref(null)

    const labelText = ref(null)
    const productText = ref(null)

    const state = reactive({
      label: {
        inputHold: false
      },
      product: {
        selected: {},
        inputHold: false
      }
    })

    // 获取分类
    getLabelRequest().then(data => {
      if (!data.err_code && data.result) store.commit('setLabels', data.result)
    })

    // 获取品名
    getProductRequest().then(data => {
      if (!data.err_code && data.result) {
        state.product.selected = data.result[0]
        store.commit('setProducts', data.result)
      }
    })

    function addLabelOnClick () {
      inpLabelElem.value.focus()
      state.label.inputHold = true
    }

    function addLabelSubmit () {
      addLabelRequest({label: labelText.value})
      .then(data => {

        if (!data.err_code && data.result) {
          store.commit('setLabels', data.result) // 更新页面中的标签
          dialog(store, 'success', data.message) // 打开通知消息
          labelText.value = null
        } else dialog(store, 'error', data.message)

      }).catch(err => { console.log(err) })
      state.label.inputHold = false
    }

    function addProductOnClick () {
      inpProductElem.value.focus()
      state.product.inputHold = true
    }

    function addProductSubmit () {
      addProductRequest({name: productText.value})
      .then(data => {

        if (!data.err_code && data.result) {
          store.commit('setProducts', data.result) // 更新页面中的标签
          dialog(store, 'success', data.message) // 打开通知消息
          productText.value = null
        } else dialog(store, 'error', data.message)

      }).catch(err => { console.log(err) })
      state.product.inputHold = false
    }

    function onProductClick (data) {
      state.product.selected = data
    }

    function onButtonClick (data) {
      var selected = state.product.selected
      var classify = selected.CLASSIFY

      if (classify.indexOf(data.ID) != -1) {
        classify = classify.filter(v => v != data.ID) // 去除已有分类ID
      } else { classify.push(data.ID) } // 新增分类ID

      chgProductRequest({
        id: selected.ID,
        name: selected.NAME,
        classify: classify.join(',')
      })
      .then(data => {

        if (!data.err_code && data.result) {
          store.commit('setProducts', data.result) // 更新页面中的品名
          dialog(store, 'success', data.message) // 打开通知消息
          var selected = state.product.selected
          selected.CLASSIFY = (data.result.filter(v => selected.ID === v.ID))[0].CLASSIFY
        } else dialog(store, 'error', data.message)

      }).catch(err => { console.log(err) })
    }

    return { ...store.state, ...state,
      labelText, productText,
      inpLabelElem, inpProductElem,
      addLabelOnClick, addLabelSubmit,
      addProductOnClick, addProductSubmit,
      onButtonClick, onProductClick }
  }
}
</script>

<style lang='sass' scoped>
.category
  width: 100%
  height: 100%

.labels,
.product
  width: 100%
  height: 40%
  padding: 5px
  margin-bottom: 10px
  box-sizing: border-box
  text-align: left
  overflow: auto

  button
    margin: 5px
    padding: 2px
    border-radius: 5px
    display: inline-block
    box-sizing: border-box
    border: 1px solid #aaa
    background-color: #61687A
    font-size: 16px
    color: #FFF

form
  margin-top: 5px
  vertical-align: middle
  display: inline-block
  input
    float: left
    height: 30px
    margin-right: 2px
    border-radius: 20px
    border: 1px solid #666
    transition: all 0.5s ease
    text-indent: 10px
    font-size: 16px

  i
    float: left
    transition: all 0.5s ease

.add-label
  display: inline-block

.product
  padding-bottom: 20px
  box-sizing: border-box
  li
    width: 90%
    font-size: 18px
    line-height: 35px
    margin-left: 5px
    box-sizing: border-box
    border-top: 1px solid #777
    overflow: height

.add-product
  margin-top: -38px
  margin-left: 50px
</style>
